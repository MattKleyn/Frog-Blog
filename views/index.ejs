<%- include("partials/header.ejs") %>
    
    <% 
    const hasTitle = typeof title !== "undefined" && title !== null;
    const hasBody = typeof body !== "undefined" && body !== null;
    const showHeadline = hasTitle || hasBody;
    %>

    <section class="newspaper_head">
        <h1 class="newspaper_name">Dev frog blog</h1>
        <p>contact info/socials</p>
        <h4>Date now</h4>
    </section>

    <div class="main_styles">
        <% if (showHeadline) { %>
        <section class="headline_article">
            <div class="hero">
                <img src="/assets/20250705_103241.jpg" alt="Article hero image" class="hero_image">
                <h1 class="hero_title">
                    <%= hasTitle ? title : "No title available right now." %>
                </h1>
                <% if (Array.isArray(categories) && categories.length > 0) { %>
                    <% categories.forEach((category) => { %>
                        <p class="pill"><%= category.category_name ?? "" %></p>
                    <% }) %>
                <% } %>
                <h3 class="hero_author">
                    <%= (typeof author !== "undefined" && author !== null) ? author : "Anonymous author"  %>
                </h3>
            </div>
            <p class="body">
                <%= hasBody ? body : "" %>
            </p>       
        </section>    
        <% } else { %>
        <section class="front_page_article">
            <h1>No new articles to view. Be a Legend, and create one!</h1>
        </section>
        <% } %>
        
        <article class="article_sidebar">
            <h2>Recent Articles</h2>
            <p>There are currently <%= quantity ?? "" %> articles to read.</p>
            <ul>
                <% if (Array.isArray(recentPosts) && recentPosts.length > 0) { %> 
                    <% recentPosts.forEach((posts) => { %>
                    <li> 
                        <a href="/posts/<%=posts.id%>">
                            <img src="" alt="">
                            <h3><%= posts.title %></h3>
                            <% if (posts.categories && posts.categories.length) { %> 
                                <% posts.categories.forEach((category) => { %>
                                <p class="pill"><%= category.category_name ?? "" %></p>
                                <% }) %>
                            <% } %>
                            <p><%= posts.body ?? "" %></p>
                            <h4><%= posts.author ?? "" %></h4>
                        </a>
                    </li>
                    <% }) %>
                <% } else { %>
                        <li>Something went wrong loading recent posts.</li>
                <% } %>
            </ul>   
        </article>
    </div>
<%- include("partials/footer.ejs") %>